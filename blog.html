<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blog/ - Nipuna Perera</title>
    <meta name="description" content="Technical blog posts about database engineering, cloud infrastructure, and automation by Nipuna Perera.">
    <meta name="theme-color" content="#16a34a">
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="css/blog-listing.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="terminal">
        <div class="terminal-header">
            <div class="terminal-buttons">
                <span class="btn-close"></span>
                <span class="btn-minimize"></span>
                <span class="btn-maximize"></span>
            </div>
            <div class="terminal-title">nipuna@localhost:~/blog$</div>
        </div>
        
        <div class="terminal-body">
            <div class="terminal-content">
                <div class="command-line">
                    <span class="prompt">nipuna@localhost:~/blog$</span>
                    <span class="command">ls *.md</span>
                </div>
                <div class="output">
                    <div id="blog-posts" class="blog-posts">
                        <!-- Blog posts will be loaded here -->
                    </div>
                </div>

                <div class="command-line">
                    <span class="prompt">nipuna@localhost:~/blog$</span>
                    <span class="command">cat categories.txt</span>
                </div>
                <div class="output">
                    <div class="categories">
                        <h3>Categories:</h3>
                        <div id="categories-list" class="categories-list">
                            <!-- Categories will be loaded here -->
                        </div>
                    </div>
                </div>

                <div class="command-line">
                    <span class="prompt">nipuna@localhost:~/blog$</span>
                    <span class="command">cat tags.txt</span>
                </div>
                <div class="output">
                    <div class="tags">
                        <h3>Tags:</h3>
                        <div id="tags-list" class="tags-list">
                            <!-- Tags will be loaded here -->
                        </div>
                    </div>
                </div>

                <div class="command-line">
                    <span class="prompt">nipuna@localhost:~/blog$</span>
                    <span class="command">cd .. && ls -la</span>
                </div>
                <div class="output">
                    <div class="file-listing">
                        <div class="file-item">
                            <span class="permissions">drwxr-xr-x</span>
                            <span class="owner">nipuna</span>
                            <span class="group">staff</span>
                            <span class="size">4096</span>
                            <span class="date">Dec 30 12:00</span>
                            <a href="index.html" class="filename">./</a>
                        </div>
                        <div class="file-item">
                            <span class="permissions">drwxr-xr-x</span>
                            <span class="owner">nipuna</span>
                            <span class="group">staff</span>
                            <span class="size">4096</span>
                            <span class="date">Dec 30 11:00</span>
                            <a href="blog.html" class="filename">blog/</a>
                        </div>
                        <div class="file-item">
                            <span class="permissions">-rw-r--r--</span>
                            <span class="owner">nipuna</span>
                            <span class="group">staff</span>
                            <span class="size">8192</span>
                            <span class="date">Dec 30 10:30</span>
                            <a href="cv.html" class="filename">cv.html</a>
                        </div>
                        <div class="file-item">
                            <span class="permissions">drwxr-xr-x</span>
                            <span class="owner">nipuna</span>
                            <span class="group">staff</span>
                            <span class="size">4096</span>
                            <span class="date">Dec 30 10:20</span>
                            <a href="projects.html" class="filename">projects/</a>
                        </div>
                        <div class="file-item">
                            <span class="permissions">-rw-r--r--</span>
                            <span class="owner">nipuna</span>
                            <span class="group">staff</span>
                            <span class="size">1024</span>
                            <span class="date">Dec 30 10:10</span>
                            <a href="contact.html" class="filename">contact.html</a>
                        </div>
                    </div>
                </div>

                <div class="command-line">
                    <span class="prompt">nipuna@localhost:~$</span>
                    <span class="command">_</span>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="js/error-handler.js"></script>
    <script src="js/lazy-load.js"></script>
    <script src="js/analytics.js"></script>
    <script src="js/seo.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Initialize SEO for blog listing
        if (window.SEO) {
            document.addEventListener('DOMContentLoaded', function() {
                window.SEO.initBlogListingSEO();
            });
        }
    </script>
    <script>
        // Get base path for GitHub Pages (works for both root and subdirectory deployments)
        function getBasePath() {
            const path = window.location.pathname;
            const base = path.substring(0, path.lastIndexOf('/'));
            // If we're at root, return empty string; otherwise return the base path
            return base === '/' ? '' : base;
        }
        
        const basePath = getBasePath();
        
        // Load blog data from scalable structure
        async function loadBlogData() {
            try {
                const response = await fetch(`${basePath}/blogs/index.json`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const blogData = await response.json();
                
                renderFileListing(blogData.posts);
                renderCategories(blogData.categories);
                renderTags(blogData.tags);
            } catch (error) {
                console.error('Error loading blog data:', error);
                // Fallback to embedded data if fetch fails
                const fallbackData = {
                    "posts": [
                        {
                            "id": "kubernetes-foundations-tutorial",
                            "title": "Kubernetes Foundations â€” Complete Beginner's Tutorial",
                            "excerpt": "Learn Kubernetes fundamentals through hands-on practice with persistent storage, perfect for SRE/DBRE roles.",
                            "date": "2025-10-30",
                            "category": "Tutorials",
                            "tags": ["Kubernetes", "SRE", "DBRE", "Storage", "MariaDB"],
                            "readTime": "20 min read",
                            "author": "Nipuna Perera",
                            "path": "2025/kubernetes-foundations-tutorial.md"
                        }
                    ],
                    "categories": [
                        {"name": "Tutorials", "count": 1}
                    ],
                    "tags": [
                        {"name": "Kubernetes", "count": 1},
                        {"name": "SRE", "count": 1},
                        {"name": "DBRE", "count": 1},
                        {"name": "Storage", "count": 1},
                        {"name": "MariaDB", "count": 1}
                    ]
                };
                
                renderFileListing(fallbackData.posts);
                renderCategories(fallbackData.categories);
                renderTags(fallbackData.tags);
            }
        }

        function renderFileListing(posts) {
            const container = document.getElementById('blog-posts');
            container.innerHTML = '';

            const listing = document.createElement('div');
            listing.className = 'file-listing';

            posts.forEach(post => {
                const item = document.createElement('div');
                item.className = 'file-item';
                const dateStr = new Date(post.date).toLocaleDateString('en-US', { month: 'short', day: '2-digit' });
                const size = (post.readTime && parseInt(post.readTime)) ? parseInt(post.readTime) * 1024 : 2048;
                item.innerHTML = `
                    <span class="permissions">-rw-r--r--</span>
                    <span class="owner">nipuna</span>
                    <span class="group">staff</span>
                    <span class="size">${size}</span>
                    <span class="date">${dateStr}</span>
                    <a class="filename" href="blog-post.html?id=${post.id}">${post.path.split('/').pop()}</a>
                `;
                listing.appendChild(item);
            });

            container.appendChild(listing);
        }

        function renderCategories(categories) {
            const container = document.getElementById('categories-list');
            container.innerHTML = '';
            
            categories.forEach(category => {
                const categoryElement = document.createElement('div');
                categoryElement.className = 'category-item';
                categoryElement.innerHTML = `
                    <span class="category-name">${category.name}</span>
                    <span class="category-count">(${category.count})</span>
                `;
                container.appendChild(categoryElement);
            });
        }

        function renderTags(tags) {
            const container = document.getElementById('tags-list');
            container.innerHTML = '';
            
            tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'tag-item';
                tagElement.innerHTML = `
                    <span class="tag-name">${tag.name}</span>
                    <span class="tag-count">${tag.count}</span>
                `;
                container.appendChild(tagElement);
            });
        }

        // Load data when page loads
        document.addEventListener('DOMContentLoaded', loadBlogData);
    </script>
</body>
</html>
