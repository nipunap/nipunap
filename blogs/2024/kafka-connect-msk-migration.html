<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Migrating from Kafka Connect to MSK - Nipuna Perera</title>
    <meta name="description" content="A comprehensive guide on migrating Kafka Connect workloads to AWS MSK, including challenges, solutions, and best practices learned from real-world implementations.">
    <link rel="stylesheet" href="../../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .blog-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .blog-content h1 {
            color: var(--terminal-green-bright);
            font-size: 2rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--terminal-green-dim);
            padding-bottom: 0.5rem;
        }
        
        .blog-content h2 {
            color: var(--terminal-cyan);
            font-size: 1.5rem;
            margin: 2rem 0 1rem 0;
        }
        
        .blog-content h3 {
            color: var(--terminal-yellow);
            font-size: 1.25rem;
            margin: 1.5rem 0 0.5rem 0;
        }
        
        .blog-content p {
            margin-bottom: 1rem;
            color: var(--terminal-green);
        }
        
        .blog-content code {
            background: rgba(0, 255, 0, 0.1);
            color: var(--terminal-green-bright);
            padding: 2px 4px;
            border-radius: 3px;
            font-family: var(--font-mono);
        }
        
        .blog-content pre {
            background: #f8fafc;
            border: 1px solid #e5e7eb;
            border-radius: 5px;
            padding: 15px;
            margin: 1rem 0;
            overflow-x: auto;
        }
        
        .blog-content pre code {
            background: none;
            padding: 0;
            color: var(--terminal-green);
        }
        
        .blog-content ul, .blog-content ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }
        
        .blog-content li {
            margin-bottom: 0.5rem;
            color: var(--terminal-green);
        }
        
        .blog-content blockquote {
            border-left: 4px solid var(--terminal-green-dim);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--terminal-white);
            font-style: italic;
        }
        
        .blog-content a {
            color: var(--terminal-cyan);
            text-decoration: none;
        }
        
        .blog-content a:hover {
            color: var(--terminal-white);
            text-shadow: 0 0 5px var(--terminal-cyan);
        }
        
        .blog-meta {
            background: rgba(17, 24, 39, 0.03);
            border: 1px solid var(--terminal-green-dim);
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 2rem;
        }
        
        .blog-meta .meta-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .blog-meta .meta-label {
            color: var(--terminal-cyan);
            font-weight: 500;
        }
        
        .blog-meta .meta-value {
            color: var(--terminal-green-bright);
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            color: var(--terminal-cyan);
            text-decoration: none;
            font-weight: 500;
        }
        
        .back-link:hover {
            color: var(--terminal-white);
            text-shadow: 0 0 5px var(--terminal-cyan);
        }
    </style>
</head>
<body>
    <div class="terminal">
        <div class="terminal-header">
            <div class="terminal-buttons">
                <span class="btn-close"></span>
                <span class="btn-minimize"></span>
                <span class="btn-maximize"></span>
            </div>
            <div class="terminal-title">nipuna@localhost:~/blogs/2024$</div>
        </div>
        
        <div class="terminal-body">
            <div class="terminal-content">
                <div class="command-line">
                    <span class="prompt">nipuna@localhost:~/blogs/2024$</span>
                    <span class="command">cat kafka-connect-msk-migration.md</span>
                </div>
                <div class="output">
                    <div class="blog-content">
                        <a href="../../blog.html" class="back-link">
                            <i class="fas fa-arrow-left"></i> Back to blog
                        </a>
                        
                        <div class="blog-meta">
                            <div class="meta-item">
                                <span class="meta-label">Title:</span>
                                <span class="meta-value">Migrating from Kafka Connect to MSK: A Production Guide</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Author:</span>
                                <span class="meta-value">Nipuna Perera</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Date:</span>
                                <span class="meta-value">December 10, 2024</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Category:</span>
                                <span class="meta-value">AWS</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Read Time:</span>
                                <span class="meta-value">12 min read</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Tags:</span>
                                <span class="meta-value">Kafka, MSK, Migration, AWS, Debezium</span>
                            </div>
                        </div>
                        
                        <h1>Migrating from Kafka Connect to MSK: A Production Guide</h1>
                        
                        <h2>Overview</h2>
                        <p>This guide covers our migration from self-managed Kafka Connect clusters to AWS MSK (Managed Streaming for Apache Kafka) at Udemy. The migration involved 50+ connectors processing 2M+ messages per day.</p>
                        
                        <h2>Why Migrate to MSK?</h2>
                        
                        <h3>Benefits</h3>
                        <ul>
                            <li><strong>Reduced operational overhead</strong>: No more cluster management</li>
                            <li><strong>Better monitoring</strong>: CloudWatch integration</li>
                            <li><strong>Automatic scaling</strong>: Based on usage patterns</li>
                            <li><strong>Security</strong>: IAM integration and encryption at rest</li>
                            <li><strong>Cost optimization</strong>: Pay for what you use</li>
                        </ul>
                        
                        <h3>Challenges</h3>
                        <ul>
                            <li><strong>Vendor lock-in</strong>: AWS-specific features</li>
                            <li><strong>Limited customization</strong>: Less control over configuration</li>
                            <li><strong>Migration complexity</strong>: Zero-downtime migration required</li>
                        </ul>
                        
                        <h2>Migration Strategy</h2>
                        
                        <h3>Phase 1: Assessment</h3>
                        <ol>
                            <li>Inventory existing connectors</li>
                            <li>Analyze data flow patterns</li>
                            <li>Identify dependencies</li>
                            <li>Calculate resource requirements</li>
                        </ol>
                        
                        <h3>Phase 2: MSK Setup</h3>
                        
                        <pre><code># Terraform configuration for MSK cluster
resource "aws_msk_cluster" "main" {
  cluster_name           = "udemy-kafka-cluster"
  kafka_version          = "2.8.1"
  number_of_broker_nodes = 3
  
  broker_node_group_info {
    instance_type   = "kafka.m5.large"
    ebs_volume_size = 1000
    
    client_subnets = [
      aws_subnet.kafka_1.id,
      aws_subnet.kafka_2.id,
      aws_subnet.kafka_3.id
    ]
    
    security_groups = [aws_security_group.kafka.id]
  }
  
  encryption_info {
    encryption_at_rest_kms_key_id = aws_kms_key.kafka.arn
  }
}</code></pre>
                        
                        <h3>Phase 3: Connector Migration</h3>
                        
                        <h4>Debezium Connectors</h4>
                        
                        <pre><code>{
  "name": "mysql-connector",
  "config": {
    "connector.class": "io.debezium.connector.mysql.MySqlConnector",
    "database.hostname": "mysql-cluster.internal",
    "database.port": "3306",
    "database.user": "debezium",
    "database.password": "${secretsmanager:udemy/debezium:password}",
    "database.server.id": "184054",
    "database.server.name": "mysql",
    "table.include.list": "udemy.courses,udemy.users",
    "database.history.kafka.bootstrap.servers": "${kafka.bootstrap.servers}",
    "database.history.kafka.topic": "dbhistory.mysql",
    "key.converter": "org.apache.kafka.connect.json.JsonConverter",
    "value.converter": "org.apache.kafka.connect.json.JsonConverter",
    "key.converter.schemas.enable": false,
    "value.converter.schemas.enable": false
  }
}</code></pre>
                        
                        <h2>Results</h2>
                        
                        <h3>Performance Improvements</h3>
                        <ul>
                            <li><strong>40% reduction</strong> in operational overhead</li>
                            <li><strong>99.9% uptime</strong> for all connectors</li>
                            <li><strong>50% cost reduction</strong> compared to self-managed</li>
                            <li><strong>Sub-second</strong> connector restart times</li>
                        </ul>
                        
                        <h2>Lessons Learned</h2>
                        <ol>
                            <li><strong>Start small</strong>: Migrate non-critical connectors first</li>
                            <li><strong>Monitor closely</strong>: Set up comprehensive alerting</li>
                            <li><strong>Test thoroughly</strong>: Load test with production data</li>
                            <li><strong>Document everything</strong>: Migration runbooks are crucial</li>
                        </ol>
                        
                        <h2>Best Practices</h2>
                        
                        <h3>Security</h3>
                        <ul>
                            <li>Use IAM roles for connector authentication</li>
                            <li>Encrypt all data in transit and at rest</li>
                            <li>Regular security audits</li>
                        </ul>
                        
                        <h3>Monitoring</h3>
                        <ul>
                            <li>Set up CloudWatch dashboards</li>
                            <li>Configure appropriate alarms</li>
                            <li>Monitor connector lag and throughput</li>
                        </ul>
                        
                        <h3>Maintenance</h3>
                        <ul>
                            <li>Regular connector updates</li>
                            <li>Capacity planning</li>
                            <li>Backup and disaster recovery</li>
                        </ul>
                        
                        <hr>
                        <p><em>Published on December 10, 2024</em></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../../script.js"></script>
</body>
</html>
