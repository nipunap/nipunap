<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scaling Redis Clusters Beyond 1TB - Nipuna Perera</title>
    <meta name="description" content="Sharing insights from scaling Redis clusters at Udemy, including performance optimization techniques and architectural decisions that enabled us to handle massive data volumes.">
    <link rel="stylesheet" href="../../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .blog-content {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .blog-content h1 {
            color: var(--terminal-green-bright);
            font-size: 2rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--terminal-green-dim);
            padding-bottom: 0.5rem;
        }
        
        .blog-content h2 {
            color: var(--terminal-cyan);
            font-size: 1.5rem;
            margin: 2rem 0 1rem 0;
        }
        
        .blog-content h3 {
            color: var(--terminal-yellow);
            font-size: 1.25rem;
            margin: 1.5rem 0 0.5rem 0;
        }
        
        .blog-content p {
            margin-bottom: 1rem;
            color: var(--terminal-green);
        }
        
        .blog-content code {
            background: rgba(0, 255, 0, 0.1);
            color: var(--terminal-green-bright);
            padding: 2px 4px;
            border-radius: 3px;
            font-family: var(--font-mono);
        }
        
        .blog-content pre {
            background: #f8fafc;
            border: 1px solid #e5e7eb;
            border-radius: 5px;
            padding: 15px;
            margin: 1rem 0;
            overflow-x: auto;
        }
        
        .blog-content pre code {
            background: none;
            padding: 0;
            color: var(--terminal-green);
        }
        
        .blog-content ul, .blog-content ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }
        
        .blog-content li {
            margin-bottom: 0.5rem;
            color: var(--terminal-green);
        }
        
        .blog-content blockquote {
            border-left: 4px solid var(--terminal-green-dim);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--terminal-white);
            font-style: italic;
        }
        
        .blog-content a {
            color: var(--terminal-cyan);
            text-decoration: none;
        }
        
        .blog-content a:hover {
            color: var(--terminal-white);
            text-shadow: 0 0 5px var(--terminal-cyan);
        }
        
        .blog-meta {
            background: rgba(17, 24, 39, 0.03);
            border: 1px solid var(--terminal-green-dim);
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 2rem;
        }
        
        .blog-meta .meta-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .blog-meta .meta-label {
            color: var(--terminal-cyan);
            font-weight: 500;
        }
        
        .blog-meta .meta-value {
            color: var(--terminal-green-bright);
        }
        
        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            color: var(--terminal-cyan);
            text-decoration: none;
            font-weight: 500;
        }
        
        .back-link:hover {
            color: var(--terminal-white);
            text-shadow: 0 0 5px var(--terminal-cyan);
        }
    </style>
</head>
<body>
    <div class="terminal">
        <div class="terminal-header">
            <div class="terminal-buttons">
                <span class="btn-close"></span>
                <span class="btn-minimize"></span>
                <span class="btn-maximize"></span>
            </div>
            <div class="terminal-title">nipuna@localhost:~/blogs/2024$</div>
        </div>
        
        <div class="terminal-body">
            <div class="terminal-content">
                <div class="command-line">
                    <span class="prompt">nipuna@localhost:~/blogs/2024$</span>
                    <span class="command">cat redis-scaling-beyond-1tb.md</span>
                </div>
                <div class="output">
                    <div class="blog-content">
                        <a href="../../blog.html" class="back-link">
                            <i class="fas fa-arrow-left"></i> Back to blog
                        </a>
                        
                        <div class="blog-meta">
                            <div class="meta-item">
                                <span class="meta-label">Title:</span>
                                <span class="meta-value">Scaling Redis Clusters Beyond 1TB: Lessons from Production</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Author:</span>
                                <span class="meta-value">Nipuna Perera</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Date:</span>
                                <span class="meta-value">December 15, 2024</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Category:</span>
                                <span class="meta-value">Database</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Read Time:</span>
                                <span class="meta-value">8 min read</span>
                            </div>
                            <div class="meta-item">
                                <span class="meta-label">Tags:</span>
                                <span class="meta-value">Redis, Scaling, Performance, AWS, Production</span>
                            </div>
                        </div>
                        
                        <h1>Scaling Redis Clusters Beyond 1TB: Lessons from Production</h1>
                        
                        <h2>Introduction</h2>
                        <p>At Udemy, we faced the challenge of scaling our Redis infrastructure to handle over 1TB of data while maintaining sub-millisecond latency and 99.99% availability. This post shares the lessons learned from this massive scaling effort.</p>
                        
                        <h2>The Challenge</h2>
                        <p>Our Redis clusters were experiencing:</p>
                        <ul>
                            <li>Memory pressure causing evictions</li>
                            <li>Increased latency during peak hours</li>
                            <li>Complex failover scenarios</li>
                            <li>Monitoring gaps at scale</li>
                        </ul>
                        
                        <h2>Solution Architecture</h2>
                        
                        <h3>1. Cluster Sharding Strategy</h3>
                        <p>We implemented a custom sharding strategy based on:</p>
                        <ul>
                            <li>Consistent hashing with virtual nodes</li>
                            <li>Data locality optimization</li>
                            <li>Load balancing across availability zones</li>
                        </ul>
                        
                        <pre><code># Example sharding configuration
class RedisClusterManager:
    def __init__(self, nodes, replication_factor=3):
        self.nodes = nodes
        self.replication_factor = replication_factor
        self.ring = self._build_consistent_hash_ring()
    
    def get_node_for_key(self, key):
        hash_value = hashlib.md5(key.encode()).hexdigest()
        return self.ring.get_node(hash_value)</code></pre>
                        
                        <h3>2. Memory Optimization</h3>
                        <ul>
                            <li>Implemented custom eviction policies</li>
                            <li>Optimized data structures</li>
                            <li>Added compression for large values</li>
                            <li>Memory usage monitoring and alerting</li>
                        </ul>
                        
                        <h3>3. Performance Tuning</h3>
                        <p>Key optimizations included:</p>
                        <ul>
                            <li>TCP keepalive settings</li>
                            <li>Connection pooling</li>
                            <li>Pipeline optimization</li>
                            <li>Custom Lua scripts for atomic operations</li>
                        </ul>
                        
                        <h2>Results</h2>
                        <ul>
                            <li><strong>99.99% availability</strong> during peak traffic</li>
                            <li><strong>Sub-millisecond latency</strong> for 95th percentile</li>
                            <li><strong>1.2TB total capacity</strong> across clusters</li>
                            <li><strong>Zero data loss</strong> during failovers</li>
                        </ul>
                        
                        <h2>Lessons Learned</h2>
                        <ol>
                            <li><strong>Plan for growth</strong>: Design with 10x capacity in mind</li>
                            <li><strong>Monitor everything</strong>: Custom metrics are crucial at scale</li>
                            <li><strong>Test failure scenarios</strong>: Chaos engineering is essential</li>
                            <li><strong>Document everything</strong>: Knowledge transfer is critical</li>
                        </ol>
                        
                        <h2>Next Steps</h2>
                        <p>We're exploring:</p>
                        <ul>
                            <li>Redis Cluster mode migration</li>
                            <li>Custom memory allocators</li>
                            <li>Advanced monitoring with ML</li>
                        </ul>
                        
                        <hr>
                        <p><em>Published on December 15, 2024</em></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../../script.js"></script>
</body>
</html>
